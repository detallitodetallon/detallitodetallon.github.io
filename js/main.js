!function(){var e=[,function(e,t,o){"use strict";o.r(t);var r=o(2);async function n(e,t,o){try{const r=await fetch(e),n=await r.text();document.getElementById(t).innerHTML=n,o&&o()}catch(e){console.error(`Error loading component ${t}:`,e)}}document.addEventListener("DOMContentLoaded",(async()=>{try{await async function(){try{const e=await fetch("./parts/head.html");let t=await e.text();t="undefined"!=typeof pageTitle?t.replace("{{pageTitle}}",pageTitle):t.replace("{{pageTitle}}",""),document.head.innerHTML+=t}catch(e){throw console.error("Error loading head:",e),e}}(),await Promise.all([n("./parts/banner-top.html","banner-top"),n("./parts/nav.html","navegador",r.setActiveNavLink),n("./parts/pasos-compra.html","pasos-compra"),n("./parts/footer.html","footer")]),document.body.classList.contains("index")}catch(e){console.error("Error loading head or components:",e)}finally{setTimeout((()=>{document.getElementById("main").style.display=""}),300)}}))},function(e,t,o){"use strict";function r(){const e=document.querySelectorAll(".navlista a"),t=window.location.pathname;e.forEach((e=>{e.getAttribute("href")==="."+t&&e.classList.add("active")}))}function n(e){Object.keys(e).forEach((t=>{e[t].sort(((e,t)=>parseFloat(e.precio.replace("S/.","").trim())-parseFloat(t.precio.replace("S/.","").trim())))}))}o.r(t),o.d(t,{orderPrice:function(){return n},setActiveNavLink:function(){return r}})},function(e,t,o){"use strict";o.r(t),o.d(t,{dataPedido:function(){return l},fetchTemplate:function(){return n},generateProductHtml:function(){return s},handlePeluches:function(){return p},handleProducto:function(){return d},handleVinil:function(){return g},hideEmptyModals:function(){return i},initializeModals:function(){return c},whatsappUrl:function(){return a}});var r=o(4);const n=async()=>{try{const e=await fetch("./parts/grilla-tabs.html");return await e.text()}catch(e){throw console.error("Error fetching grilla-tabs.html:",e),e}},c=()=>{document.querySelectorAll(".modal").forEach((e=>new bootstrap.Modal(e)))};function a(e){let t="https://api.whatsapp.com/send?phone=51940541547&text=";t+="Quiero adquirir el producto:",t+=`%0A(*)Arreglo: ${e.producto.nombre} (SKU:${e.producto.sku}) - S/${e.producto.precio}`,0!==e.peluche.precio&&(t+=`%0A(*)Peluche: ${e.peluche.nombre} (SKU:${e.peluche.sku}) - S/${e.peluche.precio}`),0!==e.vinil.precio&&(t+=`%0A(*)Mensaje Personalizado: "${e.vinil.mensaje}" - S/${e.vinil.precio}`),t+=`%0A(*)Precio Total: S/${e.precioTotal}`,e.enlace.href=t}function i(){const e=document.querySelectorAll(".modal-contenido"),t=document.querySelectorAll(".modal-video");e.forEach((e=>{0===e.querySelector("ul").children.length&&(e.style.display="none")})),t.forEach((e=>{const t=window.location,o=e.querySelector(".video-enlace").getAttribute("href");o&&o!==t&&""!==o||(e.style.display="none")}))}const l={producto:{nombre:"",sku:"",precio:0},peluche:{nombre:"",sku:"",precio:0},vinil:{mensaje:"",precio:0},get precioTotal(){return(parseFloat(this.producto.precio)+parseFloat(this.peluche.precio)+parseFloat(this.vinil.precio)).toFixed(2)},enlace:""},s=(e,t,o,r,n)=>e.replace(/{{cols}}/g,"col-xl-4 col-lg-4 col-md-6 col-12").replace(/{{imagen}}/g,t.imagen).replace(/{{nombre}}/g,t.nombre).replace(/{{precio}}/g,t.precio).replace(/{{video}}/g,t.video).replace(/{{descripcion}}/g,t.descripcion).replace(/{{contenido}}/g,n).replace(/{{index}}/g,`${o}-${r}`).replace(/{{sku}}/g,t.sku),d=()=>{document.querySelectorAll(".producto-item").forEach((e=>{e.addEventListener("click",u)}))},u=e=>{const t=e.currentTarget.getAttribute("data-bs-target"),o=document.querySelector(t),r=o.querySelector(".modal-title"),n=o.querySelector(".modal-precio"),c=parseFloat(n.dataset.precio.replace("S/.","").trim());l.producto.nombre=r.dataset.nombre,l.producto.sku=r.dataset.sku,l.producto.precio=c.toFixed(2),l.peluche.nombre="",l.peluche.sku="",l.peluche.precio=0,l.vinil.mensaje="",l.vinil.precio=0,l.enlace=""},p=async()=>{try{const e=await(0,r.fetchPeluches)();document.querySelectorAll(".modal").forEach((t=>{const o=t.id.replace("productModal",""),r=document.getElementById(`modal-pedido${o}`).querySelector(".wsp-pedido"),n=document.getElementById(`precio-total${o}`),c=document.getElementById(`modal-peluches${o}`).querySelector(".carousel-inner");m(e,c,n,r,o)}))}catch(e){console.error("Error fetching peluches:",e)}},m=(e,t,o,r,n)=>{let c="";e.forEach(((t,o)=>{o%2==0&&(o>0&&(c+="</div>"),c+=`<div class="row carousel-item ${0===o?"active":""}">`),c+=`\n            <div class="col-6 peluche" data-id="${t.sku}" data-precio="${t.precio}" data-nombre="Peluche ${t.nombre}" data-sku="${t.sku}">\n                <img src="${t.imagen}" class="d-block w-100" alt="${t.nombre}">\n                <div class="info-peluche">\n                    <h5 class="nombre">${t.nombre}</h5>\n                    <p class="precio">${t.precio}</p>\n                    <p class="tamanio">Medidas:<br /> ${t.altura}</p>\n                    <button class="select-peluche">Agregar</button>\n                </div>\n            </div>\n        `,o===e.length-1&&(c+="</div>")})),t.innerHTML=c,h(t,o,r,n)},h=(e,t,o,r)=>{const n=e.querySelectorAll(".peluche"),c=document.getElementById(`row-peluche${r}`),i=c.querySelector(`#nombre-peluche${r}`),s=c.querySelector(`#precio-peluche${r}`);n.forEach((e=>{e.addEventListener("click",(()=>{const r=e.dataset.precio,d=parseFloat(r.replace("S/.","").trim()),u=e.querySelector(".select-peluche");u.classList.contains("active")?(l.peluche.nombre="",l.peluche.sku="",l.peluche.precio=0,u.classList.remove("active"),u.innerText="Agregar",c.style.display="none",i.innerText="",s.innerText=""):(n.forEach((e=>{const t=e.querySelector(".select-peluche");t.classList.remove("active"),t.innerText="Agregar"})),l.peluche.nombre=e.dataset.nombre,l.peluche.sku=e.dataset.sku,l.peluche.precio=d.toFixed(2),u.classList.add("active"),u.innerText="Agregado",c.style.display="table-row",i.innerText=`Peluche: ${e.dataset.nombre} (SKU: ${e.dataset.sku})`,s.innerText=`S/.${d.toFixed(2)}`),t.innerText=`S/.${l.precioTotal}`,l.enlace=o,a(l)}))}))},g=()=>{document.querySelectorAll(".modal").forEach((e=>{const t=e.id.replace("productModal",""),o=document.getElementById(`moda-vinil${t}`),r=o.querySelector(`#checkvinil${t}`),n=o.querySelector(".textvinil"),c=n.querySelector(`#textvinil${t}`),i=document.getElementById(`precio-total${t}`),s=document.getElementById(`modal-pedido${t}`).querySelector(".wsp-pedido"),d=document.getElementById(`row-vinil${t}`),u=d.querySelector(`#nombre-vinil${t}`),p=d.querySelector(`#precio-vinil${t}`);n.style.display="none",r.addEventListener("change",(()=>{n.style.display=r.checked?"block":"none",r.checked||(c.value="",l.vinil.mensaje="",l.vinil.precio=0,d.style.display="none",u.innerText="",p.innerText=""),i.innerText=`S/.${l.precioTotal}`,l.enlace=s,a(l)})),c.addEventListener("input",(()=>{c.value.length>50&&(c.value=c.value.slice(0,50)),""==c.value?(l.vinil.mensaje="",l.vinil.precio=0,d.style.display="none",u.innerText="",p.innerText=""):(l.vinil.mensaje=c.value,l.vinil.precio=parseFloat(6).toFixed(2),d.style.display="table-row",u.innerText=`Vinil: "${c.value}"`,p.innerText=`S/.${parseFloat(6).toFixed(2)}`),i.innerText=`S/.${l.precioTotal}`,l.enlace=s,a(l)}))}))}},function(e,t,o){"use strict";async function r(e,t){const o=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/1UeRsfG_I1Ai27zZuWNzL4CYHdP9gzCd49Sz1IkNBtmE/values/${e}!${t}?key=AIzaSyCJmyvJUBmpgna6YTceKK_YqdEtWQi9uME`);return(await o.json()).values.slice(1)}function n(e){if(e.includes("drive.google.com/file/d/")){return`https://drive.google.com/thumbnail?id=${e.match(/\/d\/(.*?)\//)[1]}&sz=w1000`}return e}function c(e){return{id:e[0],imagen:e[1]?n(e[1]):null,nombre:e[2],precio:e[3],descripcion:e[4],contenido:e[5]?e[5].split("; "):[],video:e[6]||"",categoria:e[7]?e[7].split("; "):[],subcategorias:e[8]?e[8].split("; "):[],sku:e[9],destacado:!!e[10]&&"true"===e[10].toLowerCase()}}function a(e){return{id:e[0],imagen:n(e[1]),precio:e[2],nombre:e[3],altura:e[4],sku:e[5]}}async function i(){return(await r("Productos","A:K")).map(c).filter((e=>e.id))}async function l(){return(await r("Peluches","A:F")).map(a).filter((e=>e.id))}o.r(t),o.d(t,{fetchPeluches:function(){return l},fetchProducts:function(){return i}})},function(e,t,o){"use strict";o.r(t);var r=o(4),n=o(3),c=o(2);document.addEventListener("DOMContentLoaded",(()=>{if(!document.getElementById("mostrador"))return;const e={globos:[],gigantes:[],flores:[],helio:[]},t=(e,t)=>{Object.keys(e).forEach((o=>{const r=document.querySelector(`#${o} .productos`);e[o].forEach(((e,c)=>{if(!e.id)return;const a=e.contenido.length>0?e.contenido.map((e=>`<li>${e}</li>`)).join(""):"";t.replace(/{{cols}}/g,"col-xxl-3 col-xl-4 col-lg-4 col-md-6 col-12").replace(/{{imagen}}/g,e.imagen).replace(/{{nombre}}/g,e.nombre).replace(/{{precio}}/g,e.precio).replace(/{{video}}/g,e.video).replace(/{{descripcion}}/g,e.descripcion).replace(/{{contenido}}/g,a).replace(/{{index}}/g,e.categoria+c).replace(/{{sku}}/g,e.sku);r.innerHTML+=(0,n.generateProductHtml)(t,e,o,c,a)}))}))},o=async()=>{try{const o=await(0,n.fetchTemplate)();await(async o=>{try{return(await(0,r.fetchProducts)()).forEach((t=>{t.destacado&&e[t.categoria].push(t)})),(0,c.orderPrice)(e),Object.keys(e).forEach((t=>{e[t]=e[t].slice(0,4)})),t(e,o),(0,n.initializeModals)(),e}catch(e){throw console.error("Error processing products:",e),e}})(o),(0,n.hideEmptyModals)(),(0,n.handleProducto)(),(0,n.handleVinil)(),await(0,n.handlePeluches)()}catch(e){console.error("Error initializing mostrador:",e)}};"index"===document.body.id&&o()}))},function(e,t,o){"use strict";o.r(t);var r=o(4),n=o(3),c=o(2);document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("catalogo");if(!e)return;const t=e.dataset.categoria,o=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9\-]/g,""),a=(e,t)=>{const o={};return e.filter((e=>e.categoria.includes(t))).forEach((e=>{e.subcategorias.forEach((t=>{o[t]||(o[t]=[]),o[t].push(e)}))})),o},i=(e,t,r,n)=>{Object.keys(e).sort().forEach(((c,a)=>{const i=`subcategoria-${o(c)}`,d=0===a,u=d?"active":"";t.appendChild(l(c,i,u,d)),r.appendChild(s(e[c],c,i,d,n))}))},l=(e,t,r,n)=>{const c=document.createElement("li");return c.classList.add("nav-item"),c.innerHTML=`\n            <button class="nav-link ${r}" id="${t}-tab" data-bs-toggle="pill"\n                data-bs-target="#${t}" data-parametro="${o(e)}" type="button" role="tab" aria-controls="${t}"\n                aria-selected="${n}"><i class="bi bi-arrow-right-short"></i> ${e}</button>\n        `,c},s=(e,t,r,c,a)=>{const i=document.createElement("div");i.classList.add("tab-pane","fade"),c&&i.classList.add("show","active"),i.id=r,i.setAttribute("role","tabpanel"),i.setAttribute("aria-labelledby",`${r}-tab`),i.setAttribute("tabindex","0");const l=document.createElement("div");return l.classList.add("row","productos"),i.appendChild(l),e.forEach(((e,r)=>{if(!e.id)return;const c=e.contenido.length>0?e.contenido.map((e=>`<li>${e}</li>`)).join(""):"";l.innerHTML+=(0,n.generateProductHtml)(a,e,o(t),r,c)})),i},d=async()=>{try{const e=await(0,n.fetchTemplate)();await(async e=>{try{const o=await(0,r.fetchProducts)(),l=a(o,t);(0,c.orderPrice)(l);const s=document.getElementById("tab-subcategorias"),d=document.getElementById("content-subcategorias");return i(l,s,d,e),(0,n.initializeModals)(),l}catch(e){throw console.error("Error processing products:",e),e}})(e),(0,n.hideEmptyModals)(),(0,n.handleProducto)(),(0,n.handleVinil)(),await(0,n.handlePeluches)()}catch(e){console.error("Error initializing mostrador:",e)}};"category-page"===document.body.id&&d()}))},function(){document.addEventListener("subcategorias-loaded",(()=>{const e=new URLSearchParams(window.location.search),t=e.get("categoria");if(t){const e=document.querySelector(`button[data-parametro="${t}"]`);if(e){new bootstrap.Tab(e).show()}else console.log("No se encontró el botón de tab para la subcategoría: "+t)}document.querySelectorAll("#tab-subcategorias button").forEach((t=>{t.addEventListener("click",(()=>{const o=t.getAttribute("data-parametro");e.set("categoria",o),window.history.replaceState(null,"",`?${e.toString()}`)}))}))}))},function(){var e=document.querySelector("#slider-principal");new bootstrap.Carousel(e,{interval:5e3,wrap:!0})}],t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,o),c.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){"use strict";o.r(r);o(1),o(3),o(5),o(6),o(7),o(8)}()}();